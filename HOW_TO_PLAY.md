# 如何玩 Donkey Kong

## 🎮 启动游戏

```bash
cd /Users/tongxiaojun/github/my6502
./run_nes.sh games/Donkey-Kong.nes
```

## ⌨️ 控制说明

| 按键 | 功能 |
|------|------|
| **方向键 ↑↓←→** | 移动 Mario |
| **Z** | A 按钮（跳跃）|
| **X** | B 按钮（跑步）|
| **Enter** | Start（开始游戏）|
| **Right Shift** | Select（选择）|
| **ESC** | 退出模拟器 |

## 📊 游戏状态显示

终端会显示：
```
Frame 420 PRG=0x3a36 CHR=0x3 Video:236,238,236 Render:ON Input:UDSA
```

- **Frame**: 帧数
- **PRG**: CPU 执行地址
- **CHR**: PPU 读取地址
- **Video**: 当前像素颜色 (R,G,B)
- **Render**: 渲染状态 (ON/OFF)
- **Input**: 按键状态
  - U = Up (上)
  - D = Down (下)
  - L = Left (左)
  - R = Right (右)
  - A = A 按钮
  - B = B 按钮
  - S = Start
  - s = Select

## 🎯 游戏玩法

### Donkey Kong

1. **等待初始化** - 运行约 7 秒（420 帧）后画面出现
2. **按 Start** - 按 Enter 键开始游戏
3. **控制 Mario** - 使用方向键移动
4. **跳跃** - 按 Z 键跳跃
5. **目标** - 爬梯子到达顶部救公主

### 游戏画面

- **橙色平台** - 可以站立的地方
- **白色梯子** - 可以爬上爬下
- **红色装饰** - 关卡元素
- **黑色背景** - 空白区域

## 🐛 故障排除

### 画面全黑
- **原因**: 游戏还在初始化
- **解决**: 等待 7-10 秒（420-600 帧）

### 看不到 Mario
- **原因**: 精灵渲染可能需要调整
- **状态**: 背景显示正常，精灵系统已实现

### 控制器无反应
- **检查**: 终端是否显示 `Input:` 
- **测试**: 按方向键看是否显示 UDLR
- **确认**: SDL2 窗口是否获得焦点

## 📈 性能

- **帧率**: 60 FPS
- **延迟**: ~16ms
- **初始化**: 7-10 秒

## ✅ 当前状态

### 工作正常
- ✅ 游戏背景显示
- ✅ 平台和梯子渲染
- ✅ 颜色正确
- ✅ 控制器输入
- ✅ 60 FPS 流畅

### 需要改进
- ⏳ 精灵显示（Mario 可能不可见）
- ⏳ 音效（只有测试音）
- ⏳ 完整的游戏逻辑

## 🎉 成就

这是一个**真正可以运行 NES 游戏**的模拟器！

- 显示真实的游戏画面
- 接受键盘输入
- 60 FPS 流畅运行
- Donkey Kong 关卡可见

---

**提示**: 第一次运行需要等待游戏初始化，看到橙色平台后就可以按 Start 开始游戏了！
